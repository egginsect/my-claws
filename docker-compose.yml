networks:
  claw-network:
    driver: bridge

services:
  coder:
    build:
      context: .
      dockerfile: Dockerfile
    image: openclaw:local
    container_name: openclaw-coder
    hostname: hm01
    env_file:
      - ./coder/.env
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Etc/UTC
      - OPENCLAW_PORT=18790
    volumes:
      - ./coder/.openclaw:/config/.openclaw
      - ./coder/workspace:/config/workspace
    ports:
      - "8080:3000" # Webtop HTTP
      - "8081:3001" # Webtop HTTPS
      - "18790:18790" # OpenClaw gateway
    networks:
      - claw-network
    restart: unless-stopped

  assistant:
    image: openclaw:local
    container_name: openclaw-assistant
    hostname: hm02
    env_file:
      - ./assistant/.env
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Etc/UTC
      - OPENCLAW_PORT=18789
    volumes:
      - ./assistant/.openclaw:/config/.openclaw
      - ./assistant/workspace:/config/workspace
    ports:
      - "8082:3000" # Webtop HTTP
      - "8083:3001" # Webtop HTTPS
      - "18789:18789" # OpenClaw gateway
    networks:
      - claw-network
    restart: unless-stopped
